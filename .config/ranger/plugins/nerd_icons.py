import shutil

import ranger.api
from ranger.core.linemode import LinemodeBase

extension_maps = {
    "7z": "ï’‡",
    "gz": "ï’‡",
    "jar": "ï’‡",
    "zip": "ï’‡",
    "xz": "ï’‡",
    "tar": "ï’‡",
    "taz": "ï’‡",
    "gruntfile": "î˜‘",
    "gulpfile": "î˜",
    "dropbox": "îœ‡",
    "xls": "ïœš",
    "doc": "ïœ«",
    "ppt": "ïœ¦",
    "xml": "ïœ­",
    "webpack": "ï°©",
    ".settings.json": "îœŒ",
    "cs": "ï š",
    "procfile": "î˜‡",
    "svg": "ï°Ÿ",
    ".bashprofile": "î˜•",
    ".bashrc": "î˜•",
    ".babelrc": "ï¬¥",
    ".ds_store": "î˜•",
    "git": "îœ‚",
    ".gitattributes": "îœ‚",
    ".gitconfig": "î˜•",
    ".gitignore": "îœ‚",
    ".gitmodules": "îœ‚",
    "COMMIT_EDITMSG": "îœ‚",
    "COPYING": "î˜Š",
    "COPYING.LESSER": "î˜Š",
    ".gitlab-ci.yml": "ïŠ–",
    ".gvimrc": "î˜«",
    ".npmignore": "îœ",
    ".vimrc": "î˜«",
    ".zshrc": "î˜•",
    ".zshenv": "î˜•",
    ".zprofile": "î˜•",
    "Dockerfile": "î°",
    "Gemfile$": "î‘",
    "LICENSE": "î˜Š",
    "Vagrantfile$": "ïŠ¸",
    "_gvimrc": "î˜«",
    "_vimrc": "î˜«",
    "ai": "î´",
    "awk": "î•",
    "bash": "î•",
    "bat": "î˜•",
    "bmp": "î˜",
    "c": "î˜",
    "c++": "î˜",
    "cc": "î˜",
    "clj": "î¨",
    "cljc": "î¨",
    "cljs": "îª",
    "CMakeLists.txt": "î˜•",
    "cmake": "î˜•",
    "coffee": "î˜›",
    "conf": "î˜•",
    "config.ru": "î‘",
    "cp": "î˜",
    "cpp": "î˜",
    "csh": "î•",
    "cson": "î˜‹",
    "css": "î˜”",
    "cxx": "î˜",
    "d": "î¯",
    "dart": "î˜",
    "db": "îœ†",
    "diff": "îœ¨",
    "dockerfile": "î°",
    "dump": "îœ†",
    "edn": "îª",
    "eex": "î˜­",
    "ejs": "î˜",
    "elm": "î˜¬",
    "erl": "î±",
    "ex": "î˜­",
    "exs": "î˜­",
    "f#": "î§",
    "favicon.ico": "î˜£",
    "fish": "î•",
    "fs": "î§",
    "fsi": "î§",
    "fsscript": "î§",
    "fsx": "î§",
    "gemspec": "î‘",
    "gif": "î˜",
    "go": "î˜§",
    "h": "ïƒ½",
    "haml": "î˜",
    "hbs": "î˜",
    "hh": "ïƒ½",
    "hpp": "ïƒ½",
    "hrl": "î±",
    "hs": "î˜Ÿ",
    "htm": "î˜",
    "html": "î˜",
    "erb": "î˜",
    "hxx": "ïƒ½",
    "ico": "î˜",
    "ini": "î˜•",
    "java": "îœ¸",
    "jl": "î˜¤",
    "jpeg": "î˜",
    "jpg": "î˜",
    "js": "î˜Œ",
    "json": "î˜‹",
    "jsx": "î˜¥",
    "ksh": "î•",
    "leex": "î˜­",
    "less": "î˜”",
    "lhs": "î˜Ÿ",
    "license": "î˜Š",
    "lua": "î˜ ",
    "makefile": "î˜•",
    "markdown": "î˜‰",
    "md": "î˜‰",
    "mdx": "î˜‰",
    "mix.lock": "î˜­",
    "mjs": "î˜Œ",
    "ml": "Î»",
    "mli": "Î»",
    "mustache": "î˜",
    "nix": "ïŒ“",
    "node_modules": "îœ˜",
    "php": "î˜ˆ",
    "pl": "î©",
    "pm": "î©",
    "png": "î˜",
    "pp": "ï’™",
    "ps1": "î•",
    "psb": "î¸",
    "psd": "î¸",
    "py": "î˜†",
    "pyc": "î˜†",
    "pyd": "î˜†",
    "pyo": "î˜†",
    "r": "ï³’",
    "R": "ï³’",
    "rake": "î‘",
    "rakefile": "î‘",
    "rb": "î‘",
    "rlib": "î¨",
    "rmd": "î˜‰",
    "Rmd": "î˜‰",
    "rs": "î¨",
    "rss": "î˜™",
    "sass": "î˜ƒ",
    "scala": "îœ·",
    "scss": "î˜ƒ",
    "sh": "î•",
    "slim": "î˜",
    "sln": "îœŒ",
    "sql": "îœ†",
    "styl": "î˜€",
    "suo": "îœŒ",
    "swift": "î•",
    "t": "î©",
    "tex": "ï­¨",
    "toml": "î˜•",
    "ts": "î˜¨",
    "tsx": "îº",
    "twig": "î˜œ",
    "vim": "î˜«",
    "vue": "ïµ‚",
    "webmanifest": "î˜‹",
    "webp": "î˜",
    "xcplayground": "î•",
    "xul": "î…",
    "yaml": "î˜•",
    "yml": "î˜•",
    "zsh": "î•",
    "terminal": "ï’‰",
    "pdf": "ïœ¤",
    "kt": "ğ™†",
    "gd": "î˜•",
    "tscn": "ï¢€",
    "godot": "î£",
    "tres": "îœ†",
    "glb": "ï†²",
    "import": "ïƒ†",
    "material": "ïŸ´",
    "otf": "ï€±",
    "cfg": "î£",
    "pck": "ï’‡",
    "desktop": "ï„ˆ",
    "opus": "ïœ¢",
    "svelte": "ï‰ ",
}

exact_maps = {
    ".config": "î—¼",
    ".git": "î—»",
    "Downloads": "ïŒ",
    "Pictures": "ï",
    "TempScreenShot": "ï",
    "Documents": "ï",
    "node_modules": "îœ˜",
    ".DS_Store": "ï”µ",
    ".gitignore": "îœ‚",
    ".gitconfig": "îœ‚",
    "Dockerfile": "ïŒˆ",
    "docker-compose.yml": "ïŒˆ",
    ".vimrc": "î˜«",
    ".viminfo": "î˜«",
    "init.vim": "î˜«",
}


@ranger.api.register_linemode
class NerdIconsLinemode(LinemodeBase):
    name = "nerdicons"

    uses_metadata = False

    def filetitle(self, file, metadata):
        if file.is_directory:
            icon = exact_maps.get(file.relative_path, "ïŠ")
        elif file.is_link:
            icon = "ï’"
        elif "x-python" in file.filetype:
            icon = "î˜†"
        elif shutil.which(file.path):
            icon = "ï’‰"
        else:
            icon = exact_maps.get(
                file.relative_path, extension_maps.get(file.extension, "ï…œ")
            )
        return icon + " " + file.relative_path
